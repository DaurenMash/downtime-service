spring:
  application:
    name: downtime-service
  thymeleaf:
    enabled: true
    prefix: classpath:/templates/
    suffix: .html
    cache: false
    encoding: UTF-8
    mode: HTML
  
  data:
    mongodb:
      uri: ${MONGODB_URI:mongodb://admin:password@localhost:27017/downtime_db?authSource=admin}
      auto-index-creation: true

  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB

  # Spring Cloud AWS конфигурация
  cloud:
    aws:
      s3:
        enabled: true
        endpoint: ${S3_ENDPOINT:http://localhost:9000}
        region: ${AWS_REGION:us-east-1}
        path-style-access-enabled: true
      credentials:
        access-key: ${AWS_ACCESS_KEY_ID:minioadmin}
        secret-key: ${AWS_SECRET_ACCESS_KEY:minioadmin}
      region:
        static: ${AWS_REGION:us-east-1}
      stack:
        auto: false

aws:
  region: ${AWS_REGION:us-east-1}
  credentials:
    access-key: ${AWS_ACCESS_KEY_ID:minioadmin}
    secret-key: ${AWS_SECRET_ACCESS_KEY:minioadmin}
  s3:
    endpoint: ${S3_ENDPOINT:http://localhost:9000}
    bucket: ${S3_BUCKET_NAME:downtime-photos}
    path-style-access: true

server:
  port: 8080

springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    operations-sorter: method

logging:
  level:
    com.example.downtime: DEBUG
    io.awspring.cloud: DEBUG
    software.amazon.awssdk: DEBUG
    org.springframework.cloud.aws: DEBUG
    org.thymeleaf: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %-5level - %logger{36} - %msg%n"
  file:
    name: ./logs/downtime-service.log
    max-size: 10MB

# Настройки для загрузки файлов
file:
  upload:
    max-size: 10MB
    allowed-extensions: jpg,jpeg,png,gif,bmp